{
  "version": 4,
  "terraform_version": "1.5.7",
  "serial": 41,
  "lineage": "d9c21ab0-c4f8-d503-f9b8-b7c322eb50cb",
  "outputs": {},
  "resources": [
    {
      "mode": "managed",
      "type": "yandex_dataproc_cluster",
      "name": "dataproc-cluster",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "otus-mlops2024-dataproc-data",
            "cluster_config": [
              {
                "hadoop": [
                  {
                    "initialization_action": [],
                    "properties": null,
                    "services": [
                      "HDFS",
                      "SPARK",
                      "YARN"
                    ],
                    "ssh_public_keys": [
                      "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOLBDOtNAZhxHudW3ydcVg791ORxJjzr185fNRA02Mgb muxun@MBP-Dmitry\n"
                    ]
                  }
                ],
                "subcluster_spec": [
                  {
                    "assign_public_ip": false,
                    "autoscaling_config": [],
                    "hosts_count": 1,
                    "id": "c9qogvm48hq5m45emnf3",
                    "name": "subcluster-master",
                    "resources": [
                      {
                        "disk_size": 40,
                        "disk_type_id": "network-ssd",
                        "resource_preset_id": "s3-c2-m8"
                      }
                    ],
                    "role": "MASTERNODE",
                    "subnet_id": "e9b238e8gd5omqvitq5n"
                  },
                  {
                    "assign_public_ip": false,
                    "autoscaling_config": [],
                    "hosts_count": 3,
                    "id": "c9qn8c28cnur7ajtcaop",
                    "name": "subcluster-data",
                    "resources": [
                      {
                        "disk_size": 128,
                        "disk_type_id": "network-ssd",
                        "resource_preset_id": "s3-c4-m16"
                      }
                    ],
                    "role": "DATANODE",
                    "subnet_id": "e9b238e8gd5omqvitq5n"
                  }
                ],
                "version_id": "2.0"
              }
            ],
            "created_at": "2024-05-23T18:34:36Z",
            "deletion_protection": false,
            "description": "Yandex Data Proc cluster",
            "folder_id": "b1g1saphgr8tj33pbf9o",
            "host_group_ids": null,
            "id": "c9q39vfvtgohk6nlh4ib",
            "labels": null,
            "name": "dataproc-cluster",
            "security_group_ids": [
              "enpfnpjej83g3e25hmvv"
            ],
            "service_account_id": "ajev7vcks5lbaetqe4a5",
            "timeouts": null,
            "ui_proxy": false,
            "zone_id": "ru-central1-a"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozNjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInVwZGF0ZSI6MzYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "yandex_iam_service_account.data_proc_sa",
            "yandex_storage_bucket.data_bucket",
            "yandex_vpc_security_group.dataproc-sg",
            "yandex_vpc_subnet.subnet"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_iam_service_account",
      "name": "data_proc_sa",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "created_at": "2024-05-23T18:22:35Z",
            "description": "dataproc creator editor",
            "folder_id": "b1g1saphgr8tj33pbf9o",
            "id": "ajev7vcks5lbaetqe4a5",
            "name": "dataproc-sa",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMCwiZGVsZXRlIjo2MDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_iam_service_account_static_access_key",
      "name": "sa_static_key",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_key": "YCAJEysOryNUZzm1d6petfVUY",
            "created_at": "2024-05-23T18:22:37Z",
            "description": "",
            "encrypted_secret_key": null,
            "id": "ajelj9if3cq852jpabga",
            "key_fingerprint": null,
            "pgp_key": null,
            "secret_key": "YCMQeYZQPuBNOkygl7iBOTcM2Mi8TsWxnGw_Jqr6",
            "service_account_id": "ajev7vcks5lbaetqe4a5"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "yandex_iam_service_account.data_proc_sa"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_resourcemanager_folder_iam_member",
      "name": "bucket-creator",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "folder_id": "b1g1saphgr8tj33pbf9o",
            "id": "b1g1saphgr8tj33pbf9o/storage.editor/serviceAccount:ajev7vcks5lbaetqe4a5",
            "member": "serviceAccount:ajev7vcks5lbaetqe4a5",
            "role": "storage.editor",
            "sleep_after": null,
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMCwiZGVmYXVsdCI6NjAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAsInJlYWQiOjYwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "yandex_iam_service_account.data_proc_sa"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_resourcemanager_folder_iam_member",
      "name": "dataproc-agent",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "folder_id": "b1g1saphgr8tj33pbf9o",
            "id": "b1g1saphgr8tj33pbf9o/dataproc.agent/serviceAccount:ajev7vcks5lbaetqe4a5",
            "member": "serviceAccount:ajev7vcks5lbaetqe4a5",
            "role": "dataproc.agent",
            "sleep_after": null,
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMCwiZGVmYXVsdCI6NjAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAsInJlYWQiOjYwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "yandex_iam_service_account.data_proc_sa"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_resourcemanager_folder_iam_member",
      "name": "dataproc-user",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "folder_id": "b1g1saphgr8tj33pbf9o",
            "id": "b1g1saphgr8tj33pbf9o/dataproc.user/serviceAccount:ajev7vcks5lbaetqe4a5",
            "member": "serviceAccount:ajev7vcks5lbaetqe4a5",
            "role": "dataproc.user",
            "sleep_after": null,
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMCwiZGVmYXVsdCI6NjAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAsInJlYWQiOjYwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "yandex_iam_service_account.data_proc_sa"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_storage_bucket",
      "name": "data_bucket",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "access_key": "YCAJEysOryNUZzm1d6petfVUY",
            "acl": null,
            "anonymous_access_flags": [
              {
                "config_read": false,
                "list": false,
                "read": false
              }
            ],
            "bucket": "otus-mlops2024-dataproc-data",
            "bucket_domain_name": "otus-mlops2024-dataproc-data.storage.yandexcloud.net",
            "bucket_prefix": null,
            "cors_rule": [],
            "default_storage_class": "STANDARD",
            "folder_id": "b1g1saphgr8tj33pbf9o",
            "force_destroy": false,
            "grant": [],
            "https": [],
            "id": "otus-mlops2024-dataproc-data",
            "lifecycle_rule": [],
            "logging": [],
            "max_size": 0,
            "object_lock_configuration": [],
            "policy": "",
            "secret_key": "YCMQeYZQPuBNOkygl7iBOTcM2Mi8TsWxnGw_Jqr6",
            "server_side_encryption_configuration": [],
            "tags": {},
            "versioning": [
              {
                "enabled": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "secret_key"
              }
            ]
          ],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "yandex_iam_service_account.data_proc_sa",
            "yandex_iam_service_account_static_access_key.sa_static_key",
            "yandex_resourcemanager_folder_iam_member.bucket-creator"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_vpc_gateway",
      "name": "nat_gateway",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "created_at": "2024-05-23T18:22:35Z",
            "description": "",
            "folder_id": "b1g1saphgr8tj33pbf9o",
            "id": "enpkq1u2t0qir7cm53qf",
            "labels": {},
            "name": "dataproc-gateway",
            "shared_egress_gateway": [
              {}
            ],
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMCwiZGVsZXRlIjo2MDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_vpc_network",
      "name": "net",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "created_at": "2024-05-23T18:22:35Z",
            "default_security_group_id": "enpkbm7ve67n8ebihogd",
            "description": "otus-dataproc",
            "folder_id": "b1g1saphgr8tj33pbf9o",
            "id": "enpqkt5dab77g26dmsfu",
            "labels": {},
            "name": "dataproc-net",
            "subnet_ids": [
              "e9b238e8gd5omqvitq5n"
            ],
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMCwiZGVsZXRlIjo2MDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_vpc_route_table",
      "name": "rt",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "created_at": "2024-05-23T18:22:36Z",
            "description": "",
            "folder_id": "b1g1saphgr8tj33pbf9o",
            "id": "enpc46tv359mjuvhkasc",
            "labels": {},
            "name": "dataproc-route-table",
            "network_id": "enpqkt5dab77g26dmsfu",
            "static_route": [
              {
                "destination_prefix": "0.0.0.0/0",
                "gateway_id": "enpkq1u2t0qir7cm53qf",
                "next_hop_address": ""
              }
            ],
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAsImRlbGV0ZSI6MTgwMDAwMDAwMDAwLCJ1cGRhdGUiOjE4MDAwMDAwMDAwMH19",
          "dependencies": [
            "yandex_vpc_gateway.nat_gateway",
            "yandex_vpc_network.net"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_vpc_security_group",
      "name": "dataproc-sg",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "created_at": "2024-05-23T18:22:37Z",
            "description": "Description for security group",
            "egress": [
              {
                "description": "https egress",
                "from_port": -1,
                "id": "enpvk1i40maddpn4spnq",
                "labels": {},
                "port": 443,
                "predefined_target": "",
                "protocol": "TCP",
                "security_group_id": "",
                "to_port": -1,
                "v4_cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "v6_cidr_blocks": []
              },
              {
                "description": "ntp egress",
                "from_port": -1,
                "id": "enpgtgrho0bgn5dhkqdg",
                "labels": {},
                "port": 123,
                "predefined_target": "",
                "protocol": "UDP",
                "security_group_id": "",
                "to_port": -1,
                "v4_cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "v6_cidr_blocks": []
              },
              {
                "description": "Разрешает взаимодействие между ресурсами текущей группы безопасности",
                "from_port": 0,
                "id": "enp98pc42u9cqbaup158",
                "labels": {},
                "port": -1,
                "predefined_target": "self_security_group",
                "protocol": "ANY",
                "security_group_id": "",
                "to_port": 65535,
                "v4_cidr_blocks": [],
                "v6_cidr_blocks": []
              }
            ],
            "folder_id": "b1g1saphgr8tj33pbf9o",
            "id": "enpfnpjej83g3e25hmvv",
            "ingress": [
              {
                "description": "https ingress",
                "from_port": -1,
                "id": "enpqavubi75hhfeq20ef",
                "labels": {},
                "port": 443,
                "predefined_target": "",
                "protocol": "TCP",
                "security_group_id": "",
                "to_port": -1,
                "v4_cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "v6_cidr_blocks": []
              },
              {
                "description": "Разрешает взаимодействие между ресурсами текущей группы безопасности",
                "from_port": 0,
                "id": "enpafms9idnsq1deom1a",
                "labels": {},
                "port": -1,
                "predefined_target": "self_security_group",
                "protocol": "ANY",
                "security_group_id": "",
                "to_port": 65535,
                "v4_cidr_blocks": [],
                "v6_cidr_blocks": []
              }
            ],
            "labels": {},
            "name": "dataproc security group",
            "network_id": "enpqkt5dab77g26dmsfu",
            "status": "ACTIVE",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAsImRlbGV0ZSI6MTgwMDAwMDAwMDAwLCJ1cGRhdGUiOjE4MDAwMDAwMDAwMH19",
          "dependencies": [
            "yandex_vpc_network.net"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "yandex_vpc_subnet",
      "name": "subnet",
      "provider": "provider[\"registry.terraform.io/yandex-cloud/yandex\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "created_at": "2024-05-23T18:22:37Z",
            "description": "",
            "dhcp_options": [],
            "folder_id": "b1g1saphgr8tj33pbf9o",
            "id": "e9b238e8gd5omqvitq5n",
            "labels": {},
            "name": "dataproc-subnet",
            "network_id": "enpqkt5dab77g26dmsfu",
            "route_table_id": "enpc46tv359mjuvhkasc",
            "timeouts": null,
            "v4_cidr_blocks": [
              "10.20.30.0/24"
            ],
            "v6_cidr_blocks": [],
            "zone": "ru-central1-a"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAsImRlbGV0ZSI6MTgwMDAwMDAwMDAwLCJ1cGRhdGUiOjE4MDAwMDAwMDAwMH19",
          "dependencies": [
            "yandex_vpc_gateway.nat_gateway",
            "yandex_vpc_network.net",
            "yandex_vpc_route_table.rt"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
